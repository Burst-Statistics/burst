"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[910],{7333:(t,e,a)=>{a.d(e,{Z:()=>b});var s=a(9307),r=(a(9196),a(8197)),l=a(7429),n=a(1491),i=a(4046),c=a(2539),o=a(5736),u=a(5678),d=a(9546),m=a(8518);const b=t=>{let{filter:e,filterValue:a,label:b,children:f,startDate:g,endDate:_}=t;if(!e||!a)return(0,s.createElement)(s.Fragment,null,f);const p=(0,r.y)((t=>t.setFilters)),y=(0,r.y)((t=>t.setAnimate)),E=(0,l.q)((t=>t.goalFields)),v=(0,n.B)((t=>t.setMetrics)),D=(0,n.B)((t=>t.metrics)),h=(0,i.Y)((t=>t.setStartDate)),w=(0,i.Y)((t=>t.setEndDate)),N=(0,i.Y)((t=>t.setRange)),k=b?(0,o.__)("Click to filter by:","burst-statistics")+" "+b:(0,o.__)("Click to filter","burst-statistics");return(0,s.createElement)(c.Z,{title:k},(0,s.createElement)("span",{onClick:async t=>{let s;if(window.location.href="#statistics","goal_id"===e?(E[a]&&E[a].goal_specific_page&&E[a].goal_specific_page.value?(p("page_url",E[a].goal_specific_page.value),p(e,a),u.toast.info((0,o.__)("Filtering by goal & goal specific page","burst-statistics"))):(p(e,a),u.toast.info((0,o.__)("Filtering by goal","burst-statistics"))),D.includes("conversions")||v([...D,"conversions"])):(p(e,""),await new Promise((t=>setTimeout(t,10))),p(e,a,!0),await(async t=>{const e=document.querySelector(".burst-data-filter--animate"),a=window.getComputedStyle(e),s=e.offsetParent?e.offsetParent.offsetLeft:0,r=e.offsetParent?e.offsetParent.offsetTop:0,l=parseInt(a.marginLeft),n=parseInt(a.marginTop),i=e.offsetWidth,c=e.offsetHeight,o=t.clientX-i+window.scrollX-s-l,u=t.clientY-4*c+window.scrollY-r-n;e.style.transformOrigin="50% 50%",e.style.opacity=0,e.style.transform=`translateX(${o}px) translateY(${u}px)`,await new Promise((t=>setTimeout(t,50))),e.style.transition="transform 0.2s ease, opacity 0.2s ease-out",e.style.transform=`translateX(${o}px) translateY(${u}px) scale(1)`,e.style.opacity=1,e.style.transition="transform 0.5s ease-in-out, opacity 0.2s ease-out",e.style.transform="translateX(0) translateY(0)"})(t),y(!1)),g&&("number"==typeof g||Date.parse(g)>=16409952e5)&&(s="number"==typeof g?(0,m.J7)(g):g),s){const t=_?_>0?(0,m.J7)(_):_:(0,d.default)(new Date,"yyyy-MM-dd");h(s),w(t),N("custom")}},className:"burst-click-to-filter"},f))}},5428:(t,e,a)=>{a.d(e,{Z:()=>r});var s=a(9307);const r=t=>{const{className:e,title:a,controls:r,children:l,footer:n}=t;return(0,s.createElement)("div",{className:"burst-grid-item "+e},(0,s.createElement)("div",{className:"burst-grid-item-header"},(0,s.createElement)("h3",{className:"burst-grid-title burst-h4"},a),(0,s.createElement)("div",{className:"burst-grid-item-controls"},r)),(0,s.createElement)("div",{className:"burst-grid-item-content"},l),(0,s.createElement)("div",{className:"burst-grid-item-footer"},n))}},5910:(t,e,a)=>{a.r(e),a.d(e,{default:()=>G});var s=a(9307);const r=t=>{const{children:e}=t;return(0,s.createElement)("div",{className:"burst-data-filters"},e)};var l=a(9196),n=a(5736),i=a(5428),c=a(3882),o=a(5609),u=a(7098),d=a(1491);const m=t=>{let{metrics:e,filters:a}=t;const[r,i]=(0,l.useState)(null),m=(0,d.B)((t=>t.setMetrics)),[b,f]=(0,l.useState)(e);let g={visitors:(0,n.__)("Unique visitors","burst-statistics"),pageviews:(0,n.__)("Pageviews","burst-statistics"),bounces:(0,n.__)("Bounces","burst-statistics"),sessions:(0,n.__)("Sessions","burst-statistics")};const _=Boolean(r);a.goal_id>0&&(g.conversions=(0,n.__)("Conversions","burst-statistics"));const p=t=>{m(b),t.preventDefault(),i(null)},y=(0,l.useCallback)((t=>{const e=t.target.value,a=t.target.checked;f((t=>a?[...t,e]:t.filter((t=>t!==e))))}),[]);return(0,s.createElement)("div",null,(0,s.createElement)(o.Button,{id:"burst-filter-button",className:"burst-filter-button"+(_?" active":""),"aria-controls":"burst-filter-menu","aria-haspopup":"true","aria-expanded":_?"true":void 0,onClick:t=>{i(t.currentTarget)}},(0,s.createElement)(c.Z,{name:"filter"})),(0,s.createElement)(u.ZP,{id:"burst-filter-menu",className:"burst burst-filter-menu",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:_,onClose:p},(0,s.createElement)("h4",null,(0,n.__)("Select metrics","burst-statistics")),Object.keys(g).map((t=>(0,s.createElement)("div",{className:"burst-filter-dropdown-content-body-item",key:t},(0,s.createElement)("label",null,(0,s.createElement)("input",{type:"checkbox",value:t,checked:b.includes(t),onChange:y}),g[t])))),(0,s.createElement)("input",{type:"hidden",name:"burst-metrics",value:e}),(0,s.createElement)(o.Button,{onClick:p,className:"burst-button burst-button--secondary"},(0,n.__)("Apply","burst-statistics"))))},b=t=>{let{filters:e}=t;const r=(0,d.B)((t=>t.data)),c=(0,d.B)((t=>t.metrics)),o=(0,d.B)((t=>t.loading)),[u,b]=(0,l.useState)(null);return(0,l.useEffect)((()=>{u||Promise.all([a.e(376),a.e(354)]).then(a.bind(a,9354)).then((t=>{let{default:e}=t;b((()=>e))}))}),[]),(0,s.createElement)(i.Z,{className:"burst-column-2",title:(0,n.__)("Insights","burst-statistics"),controls:(0,s.createElement)(m,{metrics:c,filters:e})},r&&u&&(0,s.createElement)(u,{loading:o,data:r}))};var f=a(5417),g=a(8197),_=a(4046);const p=t=>{let{iconKey:e,title:a,subtitle:r,value:l,change:n,changeStatus:i}=t;return(0,s.createElement)("div",{className:"block__explanation-and-stats"},(0,s.createElement)(c.Z,{name:e}),(0,s.createElement)("div",{className:"block__explanation-and-stats__left"},(0,s.createElement)("h3",{className:"burst-h5"},a),(0,s.createElement)("p",null,r)),(0,s.createElement)("div",{className:"block__explanation-and-stats__right"},(0,s.createElement)("span",{className:"burst-h4"},l),(0,s.createElement)("p",{className:"uplift "+i},n)))};var y=a(3855),E=a(7803);const v=t=>{let{startDate:e,endDate:a}=t;const r=(0,y.Z)(e),l=(0,y.Z)(a),i=(0,E.default)(l,r)+1,c=(1===i?(0,n.__)("vs. previous day","burst-statistics"):(0,n.__)("vs. previous %s days","burst-statistics")).replace("%s",i);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",{className:"burst-small-text"},c))},D=t=>{const{startDate:e,endDate:a}=t,{data:r,loading:l}=(0,f.C)((t=>({data:t.data,loading:t.loading})));let c=l?"burst-loading":"";return(0,s.createElement)(i.Z,{title:(0,n.__)("Compare","burst-statistics"),footer:(0,s.createElement)(v,{startDate:e,endDate:a})},(0,s.createElement)("div",{className:"burst-loading-container "+c},Object.keys(r).map(((t,e)=>{let a=r[t];return(0,s.createElement)(p,{key:e,iconKey:t,title:a.title,subtitle:a.subtitle,value:a.value,change:a.change,changeStatus:a.changeStatus})}))))};a(8399),a(8518);var h=a(9324),w=a(7333);const N=()=>{const t=(0,h.d)((t=>t.loading)),e=(0,h.d)((t=>t.data));let a=t?"burst-loading":"";return(0,s.createElement)(i.Z,{title:(0,n.__)("Devices","burst-statistics")},(0,s.createElement)("div",{className:"burst-loading-container "+a},Object.keys(e).map(((t,a)=>{let r=e[t];return(0,s.createElement)(w.Z,{key:t,filter:"device",filterValue:t,label:r.title},(0,s.createElement)(p,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus}))}))))};var k=a(44);const P=t=>(0,s.createElement)("div",{className:"burst-empty-data-table"},(0,s.createElement)("p",{className:"burst-small-text"},(0,n.__)("No data available in table","burst-statistics")));var Z=a(2501);const C=()=>{const t=(0,Z.T)((t=>t.loading)),e=(0,Z.T)((t=>t.data)),a=t?"burst-loading":"";if(0!==e.length){const t=t=>(0,s.createElement)(w.Z,{filter:"page_url",filterValue:t.page_url},t.page_url);e.columns[0].cell=t}let r=e.data,l=e.columns;return(0,s.createElement)(i.Z,{className:"burst-column-2 border-to-border datatable",title:(0,n.__)("Per page","burst-statistics")},(0,s.createElement)("div",{className:`burst-loading-container ${a}`},(0,s.createElement)(k.ZP,{columns:l,data:r,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,n.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,n.__)("All","burst-statistics")},noDataComponent:(0,s.createElement)(P,null)})))};var S=a(4222);const T=t=>{const e=(0,S.T)((t=>t.loading)),a=(0,S.T)((t=>t.data));let r=e?"burst-loading":"";0!==a.length&&(a.columns[0].cell=t=>(0,s.createElement)(w.Z,{filter:"referrer",filterValue:t.referrer},t.referrer));let l=a.data,c=a.columns;return(0,s.createElement)(i.Z,{className:"burst-column-2 border-to-border datatable",title:(0,n.__)("Acquisition","burst-statistics")},(0,s.createElement)("div",{className:"burst-loading-container "+r},(0,s.createElement)(k.ZP,{columns:c,data:l,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,n.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,n.__)("All","burst-statistics")},noDataComponent:(0,s.createElement)(P,null)})))};var M=a(7429);const x=()=>{const t=(0,g.y)((t=>t.filters)),e=(0,g.y)((t=>t.filtersConf)),a=(0,g.y)((t=>t.setFilters)),r=(0,M.q)((t=>t.goalFields)),l=(0,g.y)((t=>t.animate)),n=(0,d.B)((t=>t.setMetrics)),i=(0,d.B)((t=>t.metrics));let o="";const u=t=>{let e="burst-data-filter";return l===t&&(e+=" burst-data-filter--animate"),e};return(0,s.createElement)(s.Fragment,null,Object.keys(e).map(((l,d)=>{if(""!==t[l])return"goal_id"===l?(m=t[l],o=r[m]?r[m].goal_title.value:""):o=t[l],""!==e[l].icon&&e[l].icon,(0,s.createElement)("div",{className:u(l),key:d},(0,s.createElement)(c.Z,{name:e[l].icon,size:"16"}),(0,s.createElement)("p",{className:"burst-data-filter__label"},e[l].label),(0,s.createElement)("span",{className:"burst-data-filter-divider"}),(0,s.createElement)("p",{className:"burst-data-filter__value"},o),(0,s.createElement)("button",{onClick:()=>(t=>{a(t,""),"goal_id"===t&&n(i.filter((t=>"conversions"!==t)))})(l)},(0,s.createElement)(c.Z,{name:"times",color:"var(--rsp-grey-500)",size:"16"})));var m})))};var Y=a(286),O=a(3151),B=a(9119),F=a(3894),R=a(7349),A=a(3703),z=a(1640),I=a(4135),L=a(8148),j=a(1593),q=a(876),X=a(9546);const $=new Date,V=-60*$.getTimezoneOffset(),K=Math.floor($.getTime()/1e3)+3600*burst_settings.gmt_offset-V,J=new Date(1e3*K);function W(t){const e=this.range();return(0,O.default)(t.startDate,e.startDate)&&(0,O.default)(t.endDate,e.endDate)}const H={today:{label:(0,n.__)("Today","burst-statistics"),range:()=>({startDate:(0,B.default)(J),endDate:(0,F.default)(J)})},yesterday:{label:(0,n.__)("Yesterday","burst-statistics"),range:()=>({startDate:(0,B.default)((0,R.default)(J,-1)),endDate:(0,F.default)((0,R.default)(J,-1))})},"last-7-days":{label:(0,n.__)("Last 7 days","burst-statistics"),range:()=>({startDate:(0,B.default)((0,R.default)(J,-7)),endDate:(0,F.default)((0,R.default)(J,-1))})},"last-30-days":{label:(0,n.__)("Last 30 days","burst-statistics"),range:()=>({startDate:(0,B.default)((0,R.default)(J,-30)),endDate:(0,F.default)((0,R.default)(J,-1))})},"last-90-days":{label:(0,n.__)("Last 90 days","burst-statistics"),range:()=>({startDate:(0,B.default)((0,R.default)(J,-90)),endDate:(0,F.default)((0,R.default)(J,-1))})},"last-month":{label:(0,n.__)("Last month","burst-statistics"),range:()=>({startDate:(0,A.default)((0,z.default)(J,-1)),endDate:(0,I.default)((0,z.default)(J,-1))})},"week-to-date":{label:(0,n.__)("Week to date","burst-statistics"),range:()=>({startDate:(0,B.default)((0,R.default)(J,-J.getDay())),endDate:(0,F.default)(J)})},"month-to-date":{label:(0,n.__)("Month to date","burst-statistics"),range:()=>({startDate:(0,A.default)(J),endDate:(0,F.default)(J)})},"year-to-date":{label:(0,n.__)("Year to date","burst-statistics"),range:()=>({startDate:(0,L.Z)(J),endDate:(0,F.default)(J)})},"last-year":{label:(0,n.__)("Last year","burst-statistics"),range:()=>({startDate:(0,L.Z)((0,j.default)(J,-1)),endDate:(0,q.Z)((0,j.default)(J,-1))})}},U=t=>{const[e,a]=(0,l.useState)(null),r=Boolean(e),n=(0,_.Y)((t=>t.startDate)),i=(0,_.Y)((t=>t.endDate)),o=(0,_.Y)((t=>t.setStartDate)),d=(0,_.Y)((t=>t.setEndDate)),m=(0,_.Y)((t=>t.range)),b=(0,_.Y)((t=>t.setRange)),[f,g]=(0,l.useState)((0,y.Z)(n)),[p,E]=(0,l.useState)((0,y.Z)(i)),v=(0,l.useRef)(0),D=burst_settings.date_ranges,h=(0,l.useMemo)((()=>Object.values(D).filter(Boolean).map((t=>{const e=H[t];return e.isSelected=W,e}))),[D]),w=(0,l.useCallback)((t=>{a(t.currentTarget)}),[]),N=(0,l.useCallback)((()=>{a(null)}),[]),k=(0,l.useCallback)((t=>{v.current++;const{startDate:e,endDate:a}=t.selection,s=(0,X.default)(e,"yyyy-MM-dd"),r=(0,X.default)(a,"yyyy-MM-dd");g((0,y.Z)(s)),E((0,y.Z)(r));const l=Object.keys(H).find((e=>H[e].isSelected(t.selection)))||"custom";(2===v.current||"custom"!==l||s!==r)&&(v.current=0,o(s),d(r),b(l),N())}),[o,d,b,N]),P="MMMM d, yyyy",Z=n?(0,X.default)(new Date(n),P):(0,X.default)(defaultStart,P),C=i?(0,X.default)(new Date(i),P):(0,X.default)(defaultEnd,P),S={startDate:f,endDate:p,key:"selection"};return(0,s.createElement)("div",{className:"burst-date-range-container"},(0,s.createElement)("button",{onClick:w,id:"burst-date-range-picker-open-button"},(0,s.createElement)(c.Z,{name:"calendar",size:"18"}),"custom"===m&&Z+" - "+C,"custom"!==m&&H[m].label,(0,s.createElement)(c.Z,{name:"chevron-down"})),(0,s.createElement)(u.ZP,{anchorEl:e,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:N,className:"burst"},(0,s.createElement)("div",{id:"burst-date-range-picker-container"},(0,s.createElement)(Y.Dw,{ranges:[S],rangeColors:["var(--rsp-brand-primary)"],dateDisplayFormat:P,monthDisplayFormat:"MMMM",onChange:t=>{k(t)},inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:new Date(2022,0,1),maxDate:J,staticRanges:h}))))},G=()=>{const{filters:t}=(0,g.y)((t=>({filters:t.filters}))),{startDate:e,endDate:a,range:l}=(0,_.Y)((t=>({startDate:t.startDate,endDate:t.endDate,range:t.range}))),n={filters:t,startDate:e,endDate:a,range:l};return(0,s.createElement)("div",{className:"burst-content-area burst-grid burst-statistics"},(0,s.createElement)(r,null,(0,s.createElement)(x,null),(0,s.createElement)(U,null)),(0,s.createElement)(b,{filters:t}),(0,s.createElement)(D,n),(0,s.createElement)(N,n),(0,s.createElement)(C,n),(0,s.createElement)(T,n))}}}]);