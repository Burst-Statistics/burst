"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[72],{492:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(9307),s=l(5736);l(9196);const n=e=>{let t=e.notice;return(0,a.createElement)("div",{className:"burst-task-element"},(0,a.createElement)("span",{className:"burst-task-status burst-"+t.output.icon},t.output.label),(0,a.createElement)("p",{className:"burst-task-message",dangerouslySetInnerHTML:{__html:t.output.msg}}),t.output.url&&(0,a.createElement)("a",{target:"_blank",href:t.output.url},(0,s.__)("More info","burst-statistics")),t.output.highlight_field_id&&(0,a.createElement)("span",{className:"burst-task-enable",onClick:()=>{e.highLightField(e.notice.output.highlight_field_id)}},(0,s.__)("Fix","burst-statistics")),t.output.plusone&&(0,a.createElement)("span",{className:"burst-plusone"},"1"),t.output.dismissible&&"completed"!==t.output.status&&(0,a.createElement)("div",{className:"burst-task-dismiss"},(0,a.createElement)("button",{type:"button","data-id":t.id,onClick:e.onCloseTaskHandler},(0,a.createElement)("span",{className:"burst-close-warning-x"},(0,a.createElement)("svg",{width:"20",height:"20",viewBox:"0, 0, 400,400"},(0,a.createElement)("path",{id:"path0",d:"M55.692 37.024 C 43.555 40.991,36.316 50.669,36.344 62.891 C 36.369 73.778,33.418 70.354,101.822 138.867 L 162.858 200.000 101.822 261.133 C 33.434 329.630,36.445 326.135,36.370 337.109 C 36.270 351.953,47.790 363.672,62.483 363.672 C 73.957 363.672,68.975 367.937,138.084 298.940 L 199.995 237.127 261.912 298.936 C 331.022 367.926,326.053 363.672,337.517 363.672 C 351.804 363.672,363.610 352.027,363.655 337.891 C 363.689 326.943,367.629 331.524,299.116 262.841 C 265.227 228.868,237.500 200.586,237.500 199.991 C 237.500 199.395,265.228 171.117,299.117 137.150 C 367.625 68.484,363.672 73.081,363.672 62.092 C 363.672 48.021,351.832 36.371,337.500 36.341 C 326.067 36.316,331.025 32.070,261.909 101.066 L 199.990 162.877 138.472 101.388 C 87.108 50.048,76.310 39.616,73.059 38.191 C 68.251 36.083,60.222 35.543,55.692 37.024 ",stroke:"none",fill:"#000000"}))))))}},1072:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Y});var a=l(9307),s=l(7462),n=l(5736),r=l(5249),i=l(9196);const c=e=>{const t=(0,r.H)((e=>e.selectedSubMenuItem)),l=(0,r.H)((e=>e.setSelectedSidebarMenuItem)),u=(0,r.H)((e=>e.selectedMainMenuItem)),[o,m]=((0,r.H)((e=>e.subMenu)),(0,i.useState)(e.menuItem.visible));let d=t===e.menuItem.id;if(e.menuItem.menu_items)for(const l of e.menuItem.menu_items)l.id===t&&(d=!0);let b=d?" burst-active":"";b+=e.menuItem.featured?" burst-featured":"",b+=e.menuItem.pro&&!burst_settings.is_pro?" burst-pro":"";const p={};let _=!1;return Array.isArray(e.menuItem.menu_items)&&(_=e.menuItem.menu_items.filter((e=>e.id===t)).length>0),e.menuItem.menu_items&&_||(p.href="#"+u+"/"+e.menuItem.id),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"burst-menu-item"+b},(0,a.createElement)("a",(0,s.Z)({},p,{onClick:()=>{e.menuItem.menu_items||l(e.menuItem.id)}}),(0,a.createElement)("span",null,e.menuItem.title),e.menuItem.featured&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"burst-menu-item-featured-pill"},(0,n.__)("New","burst-statistics")))),e.menuItem.menu_items&&d&&(0,a.createElement)("div",{className:"burst-submenu-item"},e.menuItem.menu_items.map(((e,t)=>e.visible&&(0,a.createElement)(c,{key:t,menuItem:e}))))))},u=c;var o=l(4460);const m=e=>{const t=(0,r.H)((e=>e.subMenuLoaded)),l=(0,r.H)((e=>e.subMenu)),s=(0,r.H)((e=>e.hasProItems));return(0,o.jf)((e=>e.fields)),t?(0,a.createElement)("div",{className:"burst-wizard-menu burst-grid-item"},(0,a.createElement)("div",{className:"burst-grid-item-header"},(0,a.createElement)("h1",{className:"burst-h4"},l.title)),(0,a.createElement)("div",{className:"burst-grid-item-content"},(0,a.createElement)("div",{className:"burst-wizard-menu-items"},l.menu_items.map(((e,t)=>(0,a.createElement)(u,{key:t,menuItem:e}))),s&&!burst_settings.is_pro&&(0,a.createElement)("div",{className:"burst-pro-menu-item"},(0,a.createElement)("div",null,(0,a.createElement)("a",{target:"_blank",href:burst_settings.upgrade_link,className:"burst-button burst-button--black"},(0,n.__)("Go Pro","burst-statistics")))))),(0,a.createElement)("div",{className:"burst-grid-item-footer"})):(0,a.createElement)("div",{className:"burst-wizard-menu burst-grid-item"},(0,a.createElement)("div",{className:"burst-grid-item-header"},(0,a.createElement)("h1",{className:"burst-h4"})),(0,a.createElement)("div",{className:"burst-grid-item-content"}))},d=(e,t)=>{let l=t.length;for(let a=0;a<l;a++)if(t[a]==e)return!0;return!1};var b=l(5609);const p=e=>{let t="",l="",s="";if(-1!==e.text.indexOf("%s")){let a=e.text.split(/%s/);t=a[0],s=a[1],l=a[2]}else s=e.text;let n=e.className?e.className:"burst-link";return(0,a.createElement)(a.Fragment,null,t," ",(0,a.createElement)("a",{className:n,target:e.target,href:e.url},s),l)};var _=l(3882);const g=e=>{let{type:t="warning",message:l,timeout:s=5e3,onTimeout:n=(()=>{})}=e;const[r,c]=(0,i.useState)(!0);(0,i.useEffect)((()=>{const e=setTimeout((()=>{n(),clearTimeout(e)}),s)}),[s,n]);const u=`burst-warning ${t}`;return(0,a.createElement)("div",{className:u},l)},E=e=>{let{value:t,onChange:l,label:s,comment:r}=e;const[c,u]=(0,i.useState)(!1),o=t,m=burst_settings.current_ip;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(b.TextareaControl,{label:s,help:r,placeholder:"127.0.0.1\n192.168.0.1",value:o,onChange:e=>(e=>{console.log("onChangeIpHandler"),console.log(e),l(e),(e=>{const t=e.split("\n"),l=new Set;for(let e=0;e<t.length;e++){if(l.has(t[e]))return void u(`Duplicate IP address found: ${t[e]}`);l.add(t[e])}u(!1)})(e)})(e),id:"ip_address"}),(0,a.createElement)(b.Button,{className:"burst-button burst-button--secondary button-add-ip",onClick:()=>{if(o.split("\n").includes(m))u("Your IP is already in the list.");else{let e=o;e+=e?`\n${m}`:m,l(e),u(!1)}},disabled:o.includes(m)},(0,n.__)("Add current IP address","burst-statistics")),c&&(0,a.createElement)(g,{message:c,onTimeout:()=>u(!1)}))},h=e=>{const[t,l]=(0,i.useState)("block-selected");let s=e.field,n=s.value,r=(e.fields,burst_settings.user_roles?burst_settings.user_roles:[]),c=n||["administrator"];const u=t=>{let l=t.target.value,a=t.target.checked,s=[...e.field.value],n=s.indexOf(l);a?-1===n&&s.push(l):n>-1&&s.splice(n,1),e.onChange(s)};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("label",null,s.label),"block-selected"===t&&(0,a.createElement)("div",{className:"burst-user-role-checkbox-blocklist"},Object.keys(r).map(((e,t)=>(0,a.createElement)("label",{key:e},(0,a.createElement)("input",{onChange:u,checked:c.includes(e),type:"checkbox",id:e,name:"user-role-block",value:e}),r[e])))))};var v=l(7702),f=l(7429);const N=(0,l(270).Ue)(((e,t)=>({licenseStatus:burst_settings.licenseStatus,setLicenseStatus:t=>e((e=>({licenseStatus:t})))})));var y=l(2539);const C=e=>{let{disabled:t,field:{id:l,options:s},goal_id:n,label:r,help:i,value:c,onChangeHandler:u,className:o}=e;return(0,a.createElement)("div",{className:`burst-radio-buttons ${o}`},(0,a.createElement)("p",{className:"burst-label"},r),(0,a.createElement)("div",{className:"burst-radio-buttons__list"},Object.keys(s).map((e=>{const{type:r,icon:i,label:o,description:m}=s[e];return(0,a.createElement)(y.Z,{title:m,arrow:!0,key:e,enterDelay:1e3},(0,a.createElement)("div",{key:`${n}-${l}-${r}`,className:"burst-radio-buttons__list__item"},(0,a.createElement)("input",{type:"radio",checked:r===c,name:`${n}-${l}`,id:`${n}-${l}-${r}`,value:r,disabled:t,onChange:e=>{u(e.target.value)}}),(0,a.createElement)("label",{htmlFor:`${n}-${l}-${r}`},(0,a.createElement)(_.Z,{name:i,size:18}),(0,a.createElement)("h5",null,o),(0,a.createElement)("div",{className:"burst-divider"}),(0,a.createElement)("p",null,m))))}))))},k=e=>{let{name:t,label:l,value:s,onChangeHandler:n}=e;return(0,a.createElement)("div",{className:"burst-field"},(0,a.createElement)("p",{className:"burst-label"},l),(0,a.createElement)("input",{type:"text",name:t,id:t,value:s,onChange:function(e){n(e.target.value)}}))},w=e=>{const{field:t,goal_id:l,label:s,help:r,value:c,onChangeHandler:u}=e,[o,m]=(0,i.useState)(c.attribute||"class"),[d,b]=(0,i.useState)(c.value),[p,_]=(0,i.useState)(""),g=(0,i.useRef)(null);let E={...t};return E.options={class:{type:"class",icon:"period",label:(0,n.__)("Class","burst-statistics"),description:(0,n.__)("Add a class to the element","burst-statistics")},id:{type:"id",icon:"hashtag",label:(0,n.__)("ID","burst-statistics"),description:(0,n.__)("Add an id to the element","burst-statistics")}},(0,a.createElement)(a.Fragment,null,(0,a.createElement)(C,{field:E,goal_id:e.goal_id,label:e.label,value:o,onChangeHandler:e=>{m(e),u({attribute:e,value:d})}}),(0,a.createElement)(k,{value:d,onChangeHandler:e=>{const t=event.target.value,l=t.replace(/[^a-zA-Z0-9-_]/g,"");if(t!==l){let e=t.replace(l,""),a=(0,n.sprintf)((0,n.__)("The character '%s' can not be used.","burst-statistics"),e);"."!==e&&"#"!==e||(a=(0,n.sprintf)((0,n.__)("You don't need to prefix the input with a '%s' character.","burst-statistics"),e,e)),_(a),clearTimeout(g.current),g.current=setTimeout((()=>{_("")}),6e3)}b(l),u({attribute:o,value:l})},field:t,label:(0,n.__)("What is the name for the")+" "+o+"?"}),p&&(0,a.createElement)("p",{style:{transition:"opacity 0.5s ease-out",opacity:1},className:"burst-settings-goals__list__item__fields__warning"},p))};var x=l(5984),S=l(5234),I=l(8518),F=l(3279),H=l.n(F);const z=e=>{const[t,l]=(0,i.useState)(!1),[s,n]=(0,i.useState)([]),[r,c]=(0,i.useState)([]),[u,o]=(0,i.useState)(e.value);(0,i.useEffect)((()=>{o(e.value)}),[e.value]),(0,i.useEffect)((()=>{l(!0),(0,S.Jq)("").then((e=>{c(e.map((e=>({value:e.page_url,label:e.page_url,page_id:e.page_id,post_title:e.post_title,pageviews:e.pageviews})))),l(!1)}))}),[]);const m=H()(((e,t)=>{l(!0),(0,S.Jq)(e).then((e=>{n(e.map((e=>({value:e.page_url,label:e.page_url,page_id:e.page_id,post_title:e.post_title,pageviews:e.pageviews})))),l(!1),t(s)}))}),500);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",{className:"burst-label"},e.field.label),(0,a.createElement)(x.Z,{classNamePrefix:"burst-select",onChange:t=>{e.onChangeHandler(t.value)},isLoading:t,isSearchable:!0,name:"selectPage",cacheOptions:!0,defaultValue:u,defaultOptions:r,defaultInputValue:u,loadOptions:m,components:{Option:Z},theme:e=>({...e,borderRadius:"var(--rsp-border-radius-input)",colors:{...e.colors,text:"orangered",primary25:"var(--rsp-green-faded)",primary:"var(--rsp-green)"}}),styles:{control:(e,t)=>({...e,borderColor:t.isFocused?"var(--rsp-green)":"var(--rsp-input-border-color)"})}}))},Z=e=>{const{innerProps:t,innerRef:l}=e,n=e.data;return(0,a.createElement)("article",(0,s.Z)({ref:l},t,{className:"burst-select__custom-option"}),(0,a.createElement)("div",null,(0,a.createElement)("h6",{className:"burst-select__title"},n.label),"Untitled"!==n.post_title&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null," - ")," ",(0,a.createElement)("p",{className:"burst-select__subtitle"},n.post_title," "))),n.pageviews>0&&(0,a.createElement)("div",{className:"burst-select__pageview-count"},(0,a.createElement)(_.Z,{name:"eye",size:12}),(0,a.createElement)("span",null,(0,I.uf)(n.pageviews))))},L=e=>{const{field:t={},goal_id:l=!1,value:s=!1,setGoalValue:n}=e,[r,i]=(0,a.useState)(!1);(0,a.useEffect)((()=>{u(t,s)}),[]);const c=t=>{let a=e.field;u(a,t),r&&n(l,a.id,t)},u=(e,t)=>{let l=!0;e.required&&(l=0!==t.length),l&&"url"===e.type&&(l=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)),i(l)};let o,m="burst-"+e.field.type,d=t.disabled;return burst_settings.is_pro&&t.pro&&(d=!1),o=!t.conditionallyDisabled,o?"hidden"===t.type?(0,a.createElement)("input",{type:"hidden",value:t.value}):"text"===t.type||"url"===t.type?(0,a.createElement)("div",{className:m},t.parent_label&&(0,a.createElement)("div",{className:"burst-parent-label"},(0,a.createElement)("label",null,t.parent_label)),r&&(0,a.createElement)(_.Z,{name:"success",color:"green"}),!r&&(0,a.createElement)(_.Z,{name:"times"}),(0,a.createElement)(b.TextControl,{help:t.comment,placeholder:t.placeholder,label:t.label,onChange:e=>c(e),value:s,disabled:d})):"radio-buttons"===t.type?(0,a.createElement)("div",{className:m},(0,a.createElement)(C,{disabled:d,field:e.field,goal_id:e.goal_id,label:t.label,help:t.comment,value:s,onChangeHandler:e=>c(e),className:"radio-buttons"})):"class-id"===t.type?(0,a.createElement)("div",{className:m},(0,a.createElement)(w,{disabled:d,field:e.field,goal_id:e.goal_id,label:t.label,help:t.comment,value:s,onChangeHandler:e=>c(e)})):"select-page"===t.type?(0,a.createElement)("div",{className:m},(0,a.createElement)(z,{disabled:d,field:e.field,goal_id:e.goal_id,label:t.label,help:t.comment,value:!1===s?"":s,onChangeHandler:e=>c(e)})):"not found field type "+t.type:(0,a.createElement)("div",{className:m,style:{display:"none"}})};function M(e){let{value:t,onChange:l}=e;const[s,r]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)((()=>{s&&c.current&&c.current.focus()}),[s]),(0,a.createElement)("div",{className:"burst-click-to-edit"},s?(0,a.createElement)("input",{type:"text",value:t,onChange:function(e){e.preventDefault(),l(e.target.value)},onBlur:function(){r(!1)},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),l(t+" ")),"Enter"===e.key&&(e.preventDefault(),r(!1))},ref:c}):(0,a.createElement)(y.Z,{title:(0,n.__)("Click to edit","burst-statistics"),arrow:!0},(0,a.createElement)("h5",{tabIndex:"0",onClick:function(e){e.preventDefault(),r(!0)},onFocus:function(){r(!0)}},t)))}var T=l(3838),D=l(4811);const O=e=>{let{isOpen:t,title:l,onClose:s,children:n}=e;return(0,a.createElement)(T.Z,{open:t,onClose:s,sx:{borderRadius:"var(--rsp-border-radius-s)"}},(0,a.createElement)(D.Z,null,l),n)};var j=l(7750),$=l(8979);const P=e=>{let{isOpen:t,goal:l,onDelete:s,onClose:r}=e;return(0,a.createElement)(O,{isOpen:t,title:(0,n.__)("Delete Goal","burst-statistics"),onClose:r},(0,a.createElement)(j.Z,null,(0,a.createElement)("p",null,(0,n.__)("Are you sure you want to delete this goal?","burst-statistics")+" "+(0,n.__)("This action cannot be undone.","burst-statistics")),(0,a.createElement)("p",null,(0,a.createElement)("strong",null,(0,n.__)("Goal name","burst-statistics"),":")," ",l.name,(0,a.createElement)("br",null),(0,a.createElement)("strong",null,(0,n.__)("Status","burst-statistics"),":")," ",l.status,(0,a.createElement)("br",null),(0,a.createElement)("strong",null,(0,n.__)("Date created","burst-statistics"),":")," ",(0,I.J7)(l.dateCreated))),(0,a.createElement)($.Z,null,(0,a.createElement)("button",{className:"burst-button burst-button--secondary",onClick:r},(0,n.__)("Cancel","burst-statistics")),(0,a.createElement)("button",{className:"burst-button burst-button--tertiary",onClick:s},(0,n.__)("Delete goal","burst-statistics"))))},G=e=>{const{id:t,goal:l,goalFields:s,setGoalValue:r,onRemove:c,onUpdate:u}=e;if(!s)return null;const[o,m]=(0,i.useState)(!1),[d,p]=(0,i.useState)("active"===s.goal_status.value);let g=s.goal_type.value,E=g&&s.goal_type.options[g]?s.goal_type.options[g].icon:"eye",h=s.goal_title.value?s.goal_title.value:(0,n.__)("New goal","burst-statistics"),v=l&&void 0!==l.date_created&&l.date_created>1?l.date_created:1;return(0,a.createElement)("div",{className:"burst-settings-goals__list__item"},(0,a.createElement)("details",null,(0,a.createElement)("summary",null,(0,a.createElement)(_.Z,{name:E,size:20}),(0,a.createElement)("span",null,(0,a.createElement)(M,{value:h,onChange:function(e){r(t,"goal_title",e)}})),(0,a.createElement)("button",{onClick:()=>m(!0),className:"burst-button-icon burst-button-icon--delete"},(0,a.createElement)(_.Z,{name:"trash",size:18})),(0,a.createElement)(y.Z,{arrow:!0,title:d?(0,n.__)("Click to de-activate","burst-statistics"):(0,n.__)("Click to activate","burst-statistics")},(0,a.createElement)("span",null,(0,a.createElement)(b.ToggleControl,{checked:d,onChange:function(e){"0"==burst_settings.goals_information_shown&&(burst_settings.goals_information_shown="1",(0,S.l)("goals_information_shown",!0)),p(e),r(t,"goal_status",e?"active":"inactive")}}))),(0,a.createElement)(_.Z,{name:"chevron-down",size:18})),(0,a.createElement)("div",{className:"burst-settings-goals__list__item__fields"},Object.keys(s).map(((e,l)=>{let n=s[e];return(0,a.createElement)(L,{key:l,field:n,goal_id:t,value:n.value,setGoalValue:r})})))),(0,a.createElement)(P,{isOpen:o,goal:{name:h,status:d?(0,n.__)("Active","burst-statistics"):(0,n.__)("Inactive","burst-statistics"),dateCreated:v},onDelete:()=>{c(t),m(!1)},onClose:()=>m(!1)}))},A=e=>{const{goals:t,addGoal:l,removeGoal:s,updateGoal:r}=(0,v.W)(),{goalFields:c,setGoalValue:u}=(0,f.q)(),{licenseStatus:o}=N(),m=e=>{s(e)};return(0,i.useEffect)((()=>{}),[t]),(0,a.createElement)("div",{className:"burst-burst-settings-goals"},(0,a.createElement)("div",{className:"burst-settings-goals__introduction"},(0,n.__)("Goals are a great way to track your progress and keep you motivated.","burst-statistics")),(0,a.createElement)("div",{className:"burst-settings-goals__list"},Object.keys(t).map(((e,l)=>(0,a.createElement)(G,{key:e,id:e,goal:t[e],goalFields:c[e],setGoalValue:u,onRemove:m,onUpdate:r}))),("valid"===o||0===Object.keys(t).length)&&(0,a.createElement)("div",{className:"burst-settings-goals__add-goal"},(0,a.createElement)("button",{className:"burst-button burst-button--secondary",onClick:()=>{l()}},(0,n.__)("Add goal","burst-statistics"))),!burst_settings.is_pro&&(0,a.createElement)("div",{className:"burst-settings-goals__upgrade"},(0,a.createElement)(_.Z,{name:"goals",size:24}),(0,a.createElement)("h4",null,(0,n.__)("Want more goals?")),(0,a.createElement)("div",{className:"burst-divider"}),(0,a.createElement)("p",null,(0,n.__)("Upgrade to Burst Pro")),(0,a.createElement)("a",{href:"https://burst-statistics.com/pricing/?src=burst-plugin",target:"_blank",className:"burst-button burst-button--black"},(0,n.__)("Upgrade to Pro","burst-statistics")))))};var R=l(492);const V=e=>{const{fields:t,setChangedField:l,updateField:s}=(0,o.jf)(),{licenseStatus:r,setLicenseStatus:i}=N(),[c,u]=(0,a.useState)(!1),[m,d]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(0,S.Kw)("license_notices",{}).then((e=>e)).then((e=>{i(e.licenseStatus),d(e.notices),u(!0)}))}),[t]);let b=e.field;const p="valid"!==r?"button-primary":"button-secondary";return(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("div",{className:"components-base-control__field"},(0,a.createElement)("label",{className:"components-base-control__label",htmlFor:b.id},b.label),(0,a.createElement)("div",{className:"rsssl-license-field"},(0,a.createElement)("input",{className:"components-text-control__input",type:"password",id:b.id,value:b.value,onChange:e=>{return t=e.target.value,void s(b.id,t);var t}}),(0,a.createElement)("button",{className:`button ${p}`,onClick:()=>(()=>{if(u(!1),"valid"===r)(0,S.Kw)("deactivate_license").then((e=>{i(e.licenseStatus),d(e.notices),u(!0)}));else{let t={};t.license=e.field.value,(0,S.Kw)("activate_license",t).then((e=>{i(e.licenseStatus),d(e.notices),u(!0)}))}})()},"valid"===r&&(0,a.createElement)(a.Fragment,null,(0,n.__)("Deactivate","really-simple-ssl")),"valid"!==r&&(0,a.createElement)(a.Fragment,null,(0,n.__)("Activate","really-simple-ssl"))))),!c&&(0,a.createElement)(a.Fragment,null,"Loading..."),c&&m.map(((e,t)=>(0,a.createElement)(R.Z,{key:t,index:t,notice:e,highLightField:""}))))},q=e=>{const[t,l]=(0,a.useState)([]),s=(0,o.jf)((e=>e.updateField)),n=(0,o.jf)((e=>e.setChangedField)),r=((0,o.jf)((e=>e.fields)),(0,o.jf)((e=>e.highLightField)));(0,a.useEffect)((()=>{let t=e.field;c(t,t.value)}));const i=t=>{let l=e.field;c(l,t),s(l.id,t),n(l.id)},c=(e,t)=>{let a=!0;e.required&&(a=0!==t.length),a&&"url"===e.type&&(a=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)),l(a)};let u=r===e.field.id?"burst-field-wrap burst-highlight":"burst-field-wrap";u+=" burst-"+e.field.type;let m,d=e.field,g=d.value,v=d.disabled,f=[],N="",y=[];if(d.options)for(var k in d.options)if(d.options.hasOwnProperty(k)){let e={};e.label=d.options[k],e.value=k,y.push(e)}return burst_settings.is_pro&&d.pro&&(v=!1),m=!d.conditionallyDisabled,m?"checkbox"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(b.ToggleControl,{disabled:v,checked:1==d.value,label:d.label,onChange:e=>i(e)}),d.comment&&(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:d.comment}})):"multicheckbox"===d.type?(0,a.createElement)("div",{className:u},d.parent_label&&(0,a.createElement)("div",{className:"burst-parent-label"},(0,a.createElement)("label",null,d.parent_label)),(0,a.createElement)(MultiCheckboxControl,{index:e.index,field:d,disabled:v}),d.comment&&(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:d.comment}})):"hidden"===d.type?(0,a.createElement)("input",{type:"hidden",value:d.value}):"license"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(V,{field:d})):"radio"===d.type?(Array.isArray(v)&&(f=v,y.forEach((function(e,t){f.indexOf(e.value)>-1&&(N=e.label,y.splice(t,1))})),v=!1),(0,a.createElement)("div",{className:u},d.parent_label&&(0,a.createElement)("div",{className:"burst-parent-label"},(0,a.createElement)("label",null,d.parent_label)),(0,a.createElement)("div",{className:"burst-label-container",htmlFor:d.id},(0,a.createElement)("label",null,d.label),(0,a.createElement)(Pro,{field:d})),(0,a.createElement)(b.RadioControl,{label:"",disabled:v,onChange:e=>i(e),selected:g,options:y}),f&&f.map(((e,t)=>(0,a.createElement)("label",{key:t},(0,a.createElement)("input",{disabled:!0,type:"radio"}),N))),d.comment&&(0,a.createElement)("p",null,d.comment))):"text"===d.type||"url"===d.type?(0,a.createElement)("div",{className:u},d.parent_label&&(0,a.createElement)("div",{className:"burst-parent-label"},(0,a.createElement)("label",null,d.parent_label)),t&&(0,a.createElement)(_.Z,{name:"success",color:"green"}),!t&&(0,a.createElement)(_.Z,{name:"times"}),(0,a.createElement)(b.TextControl,{help:d.comment,placeholder:d.placeholder,label:d.label,onChange:e=>i(e),value:g,disabled:v})):"phone"===d.type?(0,a.createElement)("div",{className:u},t&&(0,a.createElement)(_.Z,{name:"success",color:"green"}),!t&&(0,a.createElement)(_.Z,{name:"times"}),(0,a.createElement)(b.TextControl,{autoComplete:"tel",help:d.comment,placeholder:d.placeholder,label:d.label,onChange:e=>i(e),value:g,disabled:v})):"button"===d.type?(0,a.createElement)("div",{className:"burst-field-button "+u},(0,a.createElement)("label",null,d.label),(0,a.createElement)(p,{className:"burst-button burst-button--secondary",text:d.button_text,disabled:v,url:d.url})):"textarea"===d.type?(0,a.createElement)("div",{className:u},t&&(0,a.createElement)(_.Z,{name:"success",color:"green"}),!t&&(0,a.createElement)(_.Z,{name:"times"}),(0,a.createElement)(b.TextareaControl,{label:d.label,help:d.comment,value:g,onChange:e=>i(e),disabled:v})):"number"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(b.__experimentalNumberControl,{onChange:e=>i(e),help:d.comment,label:d.label,value:g,disabled:v})):"email"===d.type?(0,a.createElement)("div",{className:u},t&&(0,a.createElement)(_.Z,{name:"success",color:"green"}),!t&&(0,a.createElement)(_.Z,{name:"times"}),(0,a.createElement)(b.TextControl,{help:d.comment,label:d.label,onChange:e=>i(e),value:g,disabled:v})):"select"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(b.SelectControl,{disabled:v,help:d.comment,label:d.label,onChange:e=>i(e),value:g,options:y})):"ip_blocklist"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(E,{disabled:v,field:d,label:d.label,help:d.comment,value:g,onChange:e=>i(e),id:"ip_address"})):"user_role_blocklist"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(h,{disabled:v,field:d,label:d.label,help:d.comment,value:g,onChange:e=>i(e),id:"user_role_block"})):"goals"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(A,{disabled:v,field:e.field,goal_fields:e.goal_fields,label:d.label,help:d.comment,value:g,onChangeHandler:i,id:"user_role_block"})):"radio-buttons"===d.type?(0,a.createElement)("div",{className:u},(0,a.createElement)(C,{disabled:v,field:e.field,goal_id:e.goal_id,label:d.label,help:d.comment,value:g,onChange:e=>i(e),className:"radio-buttons"})):"not found field type "+d.type:(0,a.createElement)(a.Fragment,null)},U=e=>{let t="https://burst-statistics.com/pricing/?src=burst-plugin";const l=(0,r.H)((e=>e.subMenu)),s=(0,r.H)((e=>e.selectedSubMenuItem));let i,c=[];for(const t of e.fields)t.group_id===e.group&&c.push(t);for(const e of l.menu_items)if(e.id===s?i=e:e.menu_items&&(i=e.menu_items.filter((e=>e.id===s))[0]),i)break;for(const t of l.menu_items)if(t.id===s&&t.hasOwnProperty("groups")){let l=t.groups.filter((t=>t.id===e.group));l.length>0&&(i=l[0])}let u="invalid";if(!i)return(0,a.createElement)(a.Fragment,null);let o=i.pro_text?i.pro_text:(0,n.__)("Learn more about %sPro%s","burst-statistics");burst_settings.is_pro&&(u="invalid",o="empty"===u||"deactivated"===u?burst_settings.messageInactive:burst_settings.messageInvalid);let m="valid"!==u&&i.pro;t=i.upgrade?i.upgrade:t;let d=i.helpLink_text?i.helpLink_text:(0,n.__)("Instructions","burst-statistics"),b=m?"burst-disabled":"";return(0,a.createElement)("div",{className:"burst-grid-item burst-"+i.id+" "+b},i.title&&(0,a.createElement)("div",{className:"burst-grid-item-header"},(0,a.createElement)("h3",{className:"burst-h4"},i.title),i.helpLink&&(0,a.createElement)("div",{className:"burst-grid-item-controls"},(0,a.createElement)(p,{target:"_blank",className:"burst-helplink",text:d,url:i.helpLink}))),(0,a.createElement)("div",{className:"burst-grid-item-content"},i.intro&&(0,a.createElement)("div",{className:"burst-settings-block-intro"},i.intro),c.map(((e,t)=>(0,a.createElement)(q,{key:t,index:t,field:e,fields:c})))),m&&(0,a.createElement)("div",{className:"burst-locked"},(0,a.createElement)("div",{className:"burst-locked-overlay"},(0,a.createElement)("span",{className:"burst-task-status burst-pro"},(0,n.__)("Upgrade","burst-statistics")),(0,a.createElement)("span",null,burst_settings.is_pro&&(0,a.createElement)("span",null,o,"Â ",(0,a.createElement)("a",{className:"burst-locked-link",href:"settings/src/components/pages/Settings/SettingsGroup#settings/license"},(0,n.__)("Check license","burst-statistics"))),!burst_settings.is_pro&&(0,a.createElement)(p,{target:"_blank",text:o,url:t})))))},B=e=>{let t=e.help;t.title||(t.title=t.text,t.text=!1);let l=e.noticesExpanded?"open":"",s=t.url&&-1!==t.url.indexOf("really-simple-ssl.com")?"_blank":"_self";return(0,a.createElement)(i.Fragment,null,t.title&&t.text&&(0,a.createElement)("details",{className:"burst-wizard-help-notice burst-"+t.label.toLowerCase(),open:l},(0,a.createElement)("summary",null,t.title," ",(0,a.createElement)(_.Z,{name:"chevron-down"})),(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:t.text}}),t.url&&(0,a.createElement)("div",{className:"burst-help-more-info"},(0,a.createElement)("a",{target:s,href:t.url},(0,n.__)("More info","burst-statistics")))),t.title&&!t.text&&(0,a.createElement)("div",{className:"burst-wizard-help-notice  burst-"+t.label.toLowerCase()},(0,a.createElement)("p",null,t.title)))};var K=l(5678);const J=e=>{const[t,l]=(0,a.useState)(!0),s=(0,o.jf)((e=>e.progress)),i=(0,o.jf)((e=>e.fieldsLoaded)),c=(0,o.jf)((e=>e.saveFields)),u=(0,o.jf)((e=>e.fields)),m=((0,o.jf)((e=>e.nextButtonDisabled)),(0,o.jf)((e=>e.changedFields)),(0,o.jf)((e=>e.updateFieldsData)),(0,r.H)((e=>e.subMenuLoaded))),b=(0,r.H)((e=>e.subMenu)),p=((0,r.H)((e=>e.setSelectedSidebarMenuItem)),(0,r.H)((e=>e.selectedSubMenuItem))),_=((0,r.H)((e=>e.selectedMainMenuItem)),(0,r.H)((e=>e.nextMenuItem)),(0,r.H)((e=>e.previousMenuItem)),(0,f.q)((e=>e.saveChangedGoalValues))),g=(0,f.q)((e=>e.setChangedGoalValues)),{menu_items:E}=b;if(!m||!i||0===E.length)return(0,a.createElement)("div",{className:"burst-grid-item burst-grid-item-placeholder  burst-column-2"});let h=u.filter((e=>e.menu_id===p)),v=[];for(const e of h)d(e.group_id,v)||v.push(e.group_id);let N=(0,n.__)("Save","burst-statistics"),y=[];for(const e of s.notices){let t=!1;if(e.show_with_options&&"warning"===e.output.icon&&(t=h.filter((t=>e.show_with_options.includes(t.id))).length>0),t||e.menu_id===p){let t={};t.title=!!e.output.title&&e.output.title,t.label=e.output.label,t.id=e.id,t.text=e.output.msg,t.url=e.output.url,t.linked_field=e.show_with_option,y.push(t)}}for(const e of h.filter((e=>e.help&&!e.conditionallyDisabled))){let t=e.help;0===y.filter((e=>e.id&&e.id===t.id)).length&&y.push(e.help)}y=y.filter((e=>"completed"!==e.label.toLowerCase()));const C="license"===h[0].id;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"burst-wizard-settings burst-column-2"},v.map(((e,t)=>(0,a.createElement)(U,{key:t,index:t,group:e,fields:h}))),(0,a.createElement)("div",{className:"burst-grid-item-footer"},!C&&(0,a.createElement)("button",{className:"burst-button burst-button--primary",onClick:e=>(async()=>{const e=Promise.all([c(),_(),new Promise((e=>setTimeout(e,600)))]);K.toast.promise(e,{pending:(0,n.__)("Saving settings...","burst-statistics"),success:(0,n.__)("Settings saved","burst-statistics"),error:(0,n.__)("Something went wrong","burst-statistics")}),e.then((e=>{g([])}))})()},N))),(0,a.createElement)("div",{className:"burst-wizard-help"},(0,a.createElement)("div",{className:"burst-help-header"},(0,a.createElement)("div",{className:"burst-help-title burst-h4"},(0,n.__)("Notifications","burst-statistics")),(0,a.createElement)("div",{className:"burst-help-control",onClick:()=>{l(!t)}},!t&&(0,n.__)("Expand all","burst-statistics"),t&&(0,n.__)("Collapse all","burst-statistics"))),y.map(((e,l)=>(0,a.createElement)(B,{key:l,noticesExpanded:t,index:l,help:e,fieldId:e.id})))))},W=()=>(0,a.createElement)(a.Fragment,null),Y=()=>(0,a.createElement)("div",{className:"burst-content-area burst-grid burst-dashboard"},(0,a.createElement)(m,null),(0,a.createElement)(J,null),(0,a.createElement)(W,{className:"cmplz-wizard-notices"}))}}]);