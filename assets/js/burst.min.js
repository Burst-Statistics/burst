let heartbeat_interval,token="?token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),insert_id=0,ticking=!1,h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight";function start_heartbeat_interval(){heartbeat_interval=window.setInterval((function(){burst_update_time_on_page()}),3e4)}function stop_heartbeat_interval(){clearInterval(heartbeat_interval)}function burst_track_hit(e){if(burst_is_user_agent())return;if(!burst_wp_has_consent())return;let t=new XMLHttpRequest;t.open("POST",burst.url+"hit"+token,!0);let n={url:location.pathname,entire_url:location.href,page_id:burst.page_id,referrer_url:document.referrer,user_agent:navigator.userAgent,device_resolution:window.screen.width*window.devicePixelRatio+"x"+window.screen.height*window.devicePixelRatio,time_on_page:TimeMe.getTimeOnCurrentPageInMilliseconds()};t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(n)),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(response=JSON.parse(t.response),start_heartbeat_interval(),insert_id=response.insert_id)},"function"==typeof e&&e()}(()=>{((e,t)=>{"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],(()=>e.TimeMe=t())):e.TimeMe=t()})(this,(()=>{let e={startStopTimes:{},idleTimeoutMs:3e4,currentIdleTimeMs:0,checkIdleStateRateMs:250,isUserCurrentlyOnPage:!0,isUserCurrentlyIdle:!1,currentPageName:"default-page-name",timeElapsedCallbacks:[],userLeftCallbacks:[],userReturnCallbacks:[],trackTimeOnElement:t=>{let n=document.getElementById(t);n&&(n.addEventListener("mouseover",(()=>{e.startTimer(t)})),n.addEventListener("mousemove",(()=>{e.startTimer(t)})),n.addEventListener("mouseleave",(()=>{e.stopTimer(t)})),n.addEventListener("keypress",(()=>{e.startTimer(t)})),n.addEventListener("focus",(()=>{e.startTimer(t)})))},getTimeOnElementInSeconds:t=>{let n=e.getTimeOnPageInSeconds(t);return n||0},startTimer:(t,n)=>{if(t||(t=e.currentPageName),void 0===e.startStopTimes[t])e.startStopTimes[t]=[];else{let n=e.startStopTimes[t],r=n[n.length-1];if(void 0!==r&&void 0===r.stopTime)return}e.startStopTimes[t].push({startTime:n||new Date,stopTime:void 0})},stopAllTimers:()=>{let t=Object.keys(e.startStopTimes);for(let n=0;n<t.length;n++)e.stopTimer(t[n])},stopTimer:(t,n)=>{t||(t=e.currentPageName);let r=e.startStopTimes[t];void 0===r||0===r.length||void 0===r[r.length-1].stopTime&&(r[r.length-1].stopTime=n||new Date)},getTimeOnCurrentPageInSeconds:()=>e.getTimeOnPageInSeconds(e.currentPageName),getTimeOnPageInSeconds:t=>{let n=e.getTimeOnPageInMilliseconds(t);return void 0===n?void 0:n/1e3},getTimeOnCurrentPageInMilliseconds:()=>e.getTimeOnPageInMilliseconds(e.currentPageName),getTimeOnPageInMilliseconds:t=>{let n=0,r=e.startStopTimes[t];if(void 0===r)return;let i=0;for(let e=0;e<r.length;e++){let t=r[e].startTime,n=r[e].stopTime;void 0===n&&(n=new Date),i+=n-t}return n=+i,n},getTimeOnAllPagesInSeconds:()=>{let t=[],n=Object.keys(e.startStopTimes);for(let r=0;r<n.length;r++){let i=n[r],o=e.getTimeOnPageInSeconds(i);t.push({pageName:i,timeOnPage:o})}return t},setIdleDurationInSeconds:t=>{let n=parseFloat(t);if(!1!==isNaN(n))throw{name:"InvalidDurationException",message:"An invalid duration time ("+t+") was provided."};e.idleTimeoutMs=1e3*t},setCurrentPageName:t=>{e.currentPageName=t},resetRecordedPageTime:t=>{delete e.startStopTimes[t]},resetAllRecordedPageTimes:()=>{let t=Object.keys(e.startStopTimes);for(let n=0;n<t.length;n++)e.resetRecordedPageTime(t[n])},userActivityDetected:()=>{e.isUserCurrentlyIdle&&e.triggerUserHasReturned(),e.resetIdleCountdown()},resetIdleCountdown:()=>{e.isUserCurrentlyIdle=!1,e.currentIdleTimeMs=0},callWhenUserLeaves:(t,n)=>{e.userLeftCallbacks.push({callback:t,numberOfTimesToInvoke:n})},callWhenUserReturns:(t,n)=>{e.userReturnCallbacks.push({callback:t,numberOfTimesToInvoke:n})},triggerUserHasReturned:()=>{if(!e.isUserCurrentlyOnPage){e.isUserCurrentlyOnPage=!0,e.resetIdleCountdown();for(let t=0;t<e.userReturnCallbacks.length;t++){let n=e.userReturnCallbacks[t],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||0<r)&&(n.numberOfTimesToInvoke-=1,n.callback())}}e.startTimer()},triggerUserHasLeftPageOrGoneIdle:()=>{if(e.isUserCurrentlyOnPage){e.isUserCurrentlyOnPage=!1;for(let t=0;t<e.userLeftCallbacks.length;t++){let n=e.userLeftCallbacks[t],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||0<r)&&(n.numberOfTimesToInvoke-=1,n.callback())}}e.stopAllTimers()},callAfterTimeElapsedInSeconds:(t,n)=>{e.timeElapsedCallbacks.push({timeInSeconds:t,callback:n,pending:!0})},checkIdleState:()=>{for(let t=0;t<e.timeElapsedCallbacks.length;t++)e.timeElapsedCallbacks[t].pending&&e.getTimeOnCurrentPageInSeconds()>e.timeElapsedCallbacks[t].timeInSeconds&&(e.timeElapsedCallbacks[t].callback(),e.timeElapsedCallbacks[t].pending=!1);!1===e.isUserCurrentlyIdle&&e.currentIdleTimeMs>e.idleTimeoutMs?(e.isUserCurrentlyIdle=!0,e.triggerUserHasLeftPageOrGoneIdle()):e.currentIdleTimeMs+=e.checkIdleStateRateMs},visibilityChangeEventName:void 0,hiddenPropName:void 0,listenForVisibilityEvents:(t,n)=>{t&&e.listenForUserLeavesOrReturnsEvents(),n&&e.listForIdleEvents()},listenForUserLeavesOrReturnsEvents:()=>{void 0===document.hidden?void 0===document.mozHidden?void 0===document.msHidden?void 0!==document.webkitHidden&&(e.hiddenPropName="webkitHidden",e.visibilityChangeEventName="webkitvisibilitychange"):(e.hiddenPropName="msHidden",e.visibilityChangeEventName="msvisibilitychange"):(e.hiddenPropName="mozHidden",e.visibilityChangeEventName="mozvisibilitychange"):(e.hiddenPropName="hidden",e.visibilityChangeEventName="visibilitychange"),document.addEventListener(e.visibilityChangeEventName,(()=>{document[e.hiddenPropName]?e.triggerUserHasLeftPageOrGoneIdle():e.triggerUserHasReturned()}),!1),window.addEventListener("blur",(()=>{e.triggerUserHasLeftPageOrGoneIdle()})),window.addEventListener("focus",(()=>{e.triggerUserHasReturned()}))},listForIdleEvents:()=>{document.addEventListener("mousemove",(()=>{e.userActivityDetected()})),document.addEventListener("keyup",(()=>{e.userActivityDetected()})),document.addEventListener("touchstart",(()=>{e.userActivityDetected()})),window.addEventListener("scroll",(()=>{e.userActivityDetected()})),setInterval((()=>{!0!==e.isUserCurrentlyIdle&&e.checkIdleState()}),e.checkIdleStateRateMs)},websocket:void 0,websocketHost:void 0,setUpWebsocket:t=>{if(window.WebSocket&&t){let n=t.websocketHost;try{e.websocket=new WebSocket(n),window.onbeforeunload=()=>{e.sendCurrentTime(t.appId)},e.websocket.onopen=()=>{e.sendInitWsRequest(t.appId)},e.websocket.onerror=e=>{console&&console.log("Error occurred in websocket connection: "+e)},e.websocket.onmessage=e=>{console&&console.log(e.data)}}catch(e){console&&console.error("Failed to connect to websocket host.  Error:"+e)}}},websocketSend:t=>{e.websocket.send(JSON.stringify(t))},sendCurrentTime:t=>{let n={type:"INSERT_TIME",appId:t,timeOnPageMs:e.getTimeOnCurrentPageInMilliseconds(),pageName:e.currentPageName};e.websocketSend(n)},sendInitWsRequest:t=>{e.websocketSend({type:"INIT",appId:t})},initialize:t=>{let n,r,i=e.idleTimeoutMs||30,o=e.currentPageName||"default-page-name",s=!0,a=!0;t&&(i=t.idleTimeoutInSeconds||i,o=t.currentPageName||o,n=t.websocketOptions,r=t.initialStartTime,!1===t.trackWhenUserLeavesPage&&(s=!1),!1===t.trackWhenUserGoesIdle&&(a=!1)),e.setIdleDurationInSeconds(i),e.setCurrentPageName(o),e.setUpWebsocket(n),e.listenForVisibilityEvents(s,a),e.startTimer(void 0,r)}};return e}))}).call(this),TimeMe.initialize({idleTimeoutInSeconds:5}),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&burst_update_time_on_page()})),window.addEventListener("pagehide",burst_update_time_on_page,!1),window.addEventListener("beforeunload",burst_update_time_on_page,!1),TimeMe.callWhenUserLeaves(burst_update_time_on_page),TimeMe.callWhenUserLeaves(stop_heartbeat_interval),TimeMe.callWhenUserReturns(start_heartbeat_interval),burst_track_hit();let burst_last_time_update=!1;function burst_update_time_on_page(e){if(burst_is_user_agent())return;if(!burst_wp_has_consent())return;let t=TimeMe.getTimeOnCurrentPageInMilliseconds();if(burst_last_time_update+1e3>t)return;burst_last_time_update=t;let n={ID:insert_id,time_on_page:t},r=new XMLHttpRequest;r.open("POST",burst.url+"time"+token,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(n)),"function"==typeof callback&&callback()}function burst_wp_has_consent(){return"function"!=typeof cmplz_has_consent||cmplz_has_consent("statistics-anonymous")}function burst_is_user_agent(){let e=new RegExp("(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i"),t=navigator.userAgent;return e.test(t)}function burst_get_cookie(e){e+="=";let t=window.document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n].trim();if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}function burst_set_cookie(e,t){let n="",r=";secure",i=new Date,o=burst.cookie_retention_days;i.setTime(i.getTime()+24*o*60*60*1e3);let s=";expires="+i.toGMTString();"https:"!==window.location.protocol&&(r=""),n.length>0&&(n=";domain="+n),document.cookie=e+"="+t+";SameSite=Lax"+r+s+n+";path=/"}