const burst_token="?token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,7);let burst_insert_id=0,burst_track_hit_running=!1,burst_last_time_update=!1,burst_cookieless_option=burst.options.enable_cookieless_tracking,burst_get_cookie=(window.burst_enable_cookieless_tracking=burst.options.enable_cookieless_tracking,o=>new Promise((i,t)=>{o+="=";let r=window.document.cookie.split(";");for(let e=0;e<r.length;e++){let t=r[e].trim();0===t.indexOf(o)&&i(t.substring(o.length,t.length))}t(!1)})),burst_set_cookie=(t,e)=>{let i="",r=";secure",o=new Date;var n=burst.cookie_retention_days,n=(o.setTime(o.getTime()+24*n*60*60*1e3),";expires="+o.toGMTString());"https:"!==window.location.protocol&&(r=""),0<i.length&&(i=";domain="+i),document.cookie=t+"="+e+";SameSite=Strict"+r+n+i+";path=/"},burst_use_cookies=()=>!!navigator.cookieEnabled&&("1"!=burst_cookieless_option||"1"!=window.burst_enable_cookieless_tracking);function burst_enable_cookies(){window.burst_enable_cookieless_tracking=0,burst_use_cookies()&&burst_uid().then(t=>{burst_set_cookie("burst_uid",t.uid)})}let burst_generate_uid=()=>{let e="";for(let t=0;t<32;t++)e+=Math.floor(16*Math.random()).toString(16);return e};const burst_uid=()=>new Promise(e=>{let i={uid:!1,first_time_visit:!1};burst_use_cookies()?burst_get_cookie("burst_uid").then(t=>{i.uid=t,i.first_time_visit=!1,e(i)}).catch(()=>{i.uid=burst_generate_uid(),i.first_time_visit=!0,burst_set_cookie("burst_uid",i.uid),e(i)}):burst_fingerprint().then(t=>{i.uid="f-"+t,i.first_time_visit="fingerprint",e(i)}).catch(()=>{i.uid="f-"+burst_generate_uid(),i.first_time_visit="fingerprint",e(i)})}),burst_fingerprint=()=>new Promise((e,i)=>{imprint.test(["availableScreenResolution","canvas","colorDepth","cookies","cpuClass","deviceDpi","doNotTrack","indexedDb","language","localStorage","pixelRatio","platform","plugins","processorCores","screenResolution","sessionStorage","timezoneOffset","touchSupport","userAgent","webGl"]).then(function(t){e(t)}).catch(t=>{i(t)})});let burst_get_time_on_page=()=>new Promise(t=>{var e=TimeMe.getTimeOnCurrentPageInMilliseconds();burst_last_time_update+1e3<e&&t(burst_last_time_update=e),t(0)}),burst_is_user_agent=()=>{let t=new RegExp("(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i");var e=navigator.userAgent;return t.test(e)},burst_api_request=r=>new Promise((t,e)=>{let i=new XMLHttpRequest;i.open(r.method||"POST",r.url,!0),i.setRequestHeader("Content-type","application/json"),i.send(r.data),i.onload=()=>{200<=i.status&&i.status<300?t(i.response):e(i.statusText)},i.onerror=()=>e(i.statusText)});async function burst_update_hit(t=!1){if(!(burst_is_user_agent()||burst_insert_id<1)){var i=new CustomEvent("burst_before_update_hit",{detail:burst});document.dispatchEvent(i);let e={ID:burst_insert_id,uid:!1,time_on_page:0};await burst_get_time_on_page().then(t=>{e.time_on_page=t}),!1!==t&&await burst_uid().then(t=>e.uid=t.uid),(0<e.time_on_page||!1!==e.uid)&&await burst_api_request({url:burst.url+"update"+burst_token,data:JSON.stringify(e)}).catch(t=>{console.log(t)})}}async function burst_track_hit(){if(!burst_is_user_agent()&&!(0<burst_insert_id||burst_track_hit_running)){burst_track_hit_running=!0;var t=new CustomEvent("burst_before_track_hit",{detail:burst});document.dispatchEvent(t),burst_last_time_update=TimeMe.getTimeOnCurrentPageInMilliseconds();let e={uid:!1,url:location.pathname,entire_url:location.href,page_id:burst.page_id,referrer_url:document.referrer,user_agent:navigator.userAgent,device_resolution:window.screen.width*window.devicePixelRatio+"x"+window.screen.height*window.devicePixelRatio,time_on_page:burst_last_time_update};await burst_uid().then(t=>{e.uid=t.uid,e.first_time_visit=t.first_time_visit}),t=new CustomEvent("burst_track_hit",{detail:e}),document.dispatchEvent(t);t={method:"POST",url:burst.url+"hit"+burst_token,data:JSON.stringify(e)};burst_api_request(t).then(t=>{t=JSON.parse(t);burst_insert_id=t.insert_id,burst_track_hit_running=!1}).catch(t=>{burst_track_hit_running=!1,console.log(t)})}}function burst_init_events(){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&burst_update_hit()}),window.addEventListener("pagehide",burst_update_hit,!1),window.addEventListener("beforeunload",burst_update_hit,!1),TimeMe.callWhenUserLeaves(burst_update_hit),"loading"!==document.readyState?burst_track_hit():document.addEventListener("DOMContentLoaded",burst_track_hit),document.addEventListener("burst_fire_hit",function(){burst_track_hit()}),document.addEventListener("burst_enable_cookies",function(){burst_enable_cookies(),burst_update_hit(!0)})}burst_init_events();